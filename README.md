Минимальная имплементация event loop паттерна для PHP^ под капотом стремный stream_select линукса.